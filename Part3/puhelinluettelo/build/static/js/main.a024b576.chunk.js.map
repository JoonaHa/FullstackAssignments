{"version":3,"sources":["services/persons.js","App.js","serviceWorker.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","person","post","id","delete","concat","put","Notification","_ref","notification","message","style","color","type","background","fontSize","borderStyle","borderRadius","padding","marginBottom","react_default","a","createElement","Filter","props","onChange","handleChange","value","Persons","persons","map","p","key","name","number","onClick","deletePerson","PersonForm","onSubmit","handleSubmit","handleNameChange","newName","handleNumberChange","newNumber","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","filter","setFilter","_useState9","_useState10","setNotification","useEffect","personService","notify","arguments","length","undefined","setTimeout","personsToShow","toLowerCase","includes","App_Notification","App_Filter","event","target","App_PersonForm","preventDefault","existingPerson","find","window","confirm","objectSpread","replacedPerson","createdPerson","App_Persons","Boolean","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a024b576.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = \n'https://immense-savannah-71880.herokuapp.com/api/persons'\n\nconst getAll = () => {\n  const promise = axios.get(baseUrl)\n\n  return promise.then(response => response.data)\n}\n\nconst create = (person) => {\n  const promise = axios.post(baseUrl, person)\n\n  return promise.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const promise = axios.delete(`${baseUrl}/${id}`)\n\n  return promise.then(response => response.data)\n}\n\nconst replace = (person) => {\n  const promise = axios.put(`${baseUrl}/${person.id}`, person)\n\n  return promise.then(response => response.data)\n}\n\nexport default {\n  getAll, create, remove, replace\n}","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\nconst Notification = ({ notification }) => {\n  if (notification.message === null) {\n    return null\n  }\n\n  const style = {\n    color: notification.type === 'error' ? 'red' : 'green',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n  }\n\n  return (\n    <div style={style}>\n      {notification.message}\n    </div>\n  )\n}\n\nconst Filter = (props) => {\n  return (\n    <div>\n      rajaa näytettäviä\n      <input onChange={props.handleChange} value={props.value} />\n    </div>\n  )\n}\n\nconst Persons = (props) => {\n  return (\n    props.persons.map(p =>\n      <div key={p.name}>\n        {p.name} {p.number} <button onClick={()=>props.deletePerson(p.id)}>poista</button>\n      </div>\n    )\n  )\n}\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.handleSubmit}>\n      <div>\n        nimi: <input onChange={props.handleNameChange} value={props.newName} />\n      </div>\n      <div>\n        numero: <input onChange={props.handleNumberChange} value={props.newNumber} />\n      </div>\n      <div>\n        <button type=\"submit\">lisää</button>\n      </div>\n    </form>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [notification, setNotification] = useState({\n    message: null\n  })\n\n  useEffect(() => {\n    personService.getAll()\n      .then(data => {\n        setPersons(data)\n      })\n  }, [])\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n  const handleFilterChange = (event) => setFilter(event.target.value)\n\n  const notify = (message, type='success') => {\n    setNotification({ message, type })\n    setTimeout(() => setNotification({ message: null }), 10000)\n  }\n \n  const handleSubmit = (event) => {\n    event.preventDefault()\n\n    const existingPerson = persons.find(p => p.name === newName)\n\n    if (existingPerson) {\n      const ok = window.confirm(`${newName} on jo luettelossa, korvataanko vanha numero uudella`)\n      \n\n      \n      if (ok) {\n        personService\n          .replace({\n            ...existingPerson,\n            number: newNumber\n          })\n          .then(replacedPerson => {\n            setPersons(persons.map(p => p.name === newName ? replacedPerson : p))\n            setNewName('')\n            setNewNumber('')\n            notify(`Henkilön ${newName} numero muutettu`)\n          })\n          /*\n          .catch(() => {\n            setPersons(persons.filter(p => p.name !== newName))\n            notify(`Henkilön ${newName} oli jo poistettu`, 'error')\n          })\n          */\n      }\n\n      return\n    } \n     \n  personService\n      .create({\n        name: newName,\n        number: newNumber\n      })\n      .then(createdPerson => {\n        setPersons(persons.concat(createdPerson))\n        setNewName('')\n        setNewNumber('')\n        notify(`Lisättiin ${createdPerson.name}`)\n      })\n  }\n\n  const deletePerson = (id) => {\n    const person = persons.find(p => p.id === id)\n    const ok = window.confirm(`Poistetaanko ${person.name}`)\n    if (ok) {\n      personService\n        .remove(id)\n        .then(() => {\n          setPersons(persons.filter(p => p.id !== id))\n        })\n      notify(`Poistettiin ${person.name}`)\n    }\n  }\n\n  const personsToShow = filter.length === 0\n    ? persons \n    : persons.filter(p => p.name.toLowerCase().includes(filter.toLowerCase()) )\n\n  return (\n    <div>\n      <h2>Puhelinluettelo</h2>\n\n      <Notification notification={notification} />\n\n      <Filter handleChange={handleFilterChange} value={filter} />\n\n      <h3>lisää uusi</h3>\n\n      <PersonForm \n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        handleSubmit={handleSubmit}\n        newName={newName}\n        newNumber={newNumber}\n      />\n\n      <h3>Numerot</h3>\n\n      <Persons persons={personsToShow} deletePerson={deletePerson} />\n    </div>\n  )\n\n}\n\nexport default App","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}